### Basic Analysis

I used the `AnalyzeAPK` module by *androguard* to extract the defined information.

For subtask b) I used `apk.get_details_permissions()` which also contains information about the protection level. 
So I filtered for the *dangerous* protection level in order to find the *dangerous* permissions as stated in the exercise. 

However I faced the issue, that androguard seems to report wrong protection levels (eg. `READ_CONTACTS` as used in box.apk was tagged as *normal* by androguard, although it's part of the dangerous permission group). 

### Logging-based Vulnerabilities 1.
#### 2.1.The data that is being logged by the vulnerable app
Using the command "adb logcat" of Android Debug Bridge(adb) after installing the app in the emulator, I came to know that the data that is being logged by the vulnerable app is the credit card number which the user enters.

#### 2.1. the vulnerable code segments i.e. which class and lines of code
Vulnerable Class: `LogActivity.java`

LOC : 24-26

Vulnerable Code
```
public void checkout(View view) {
    EditText cctxt = (EditText) findViewById(R.id.ccText);
    try {
        processCC(cctxt.getText().toString());
    } catch (RuntimeException e) {
        Log.e("diva-log", "Error while processing transaction with
        credit card: " + cctxt.getText().toString());
        Toast.makeText(this, "An error occured. Please try again later", 0).show();
    }
}
```


#### 2.1. The problem!
Attacker can remotely access the logs as they are unprotected and find sensitive information like the credit card number in it which injures the security goal of confidentiality.


### Logging-based Vulnerabilities 2.2

#### 2.2.Kind of data is being logged
The application logs Session data and tries to send the same http request for loading the content. 

#### 2.2. Source of the vulnerability in the code
Vulnerability lies in the class `RESTBroker.java`

The method signature is `public static HttpRequestBase getHttpRequest(HashMap<String, String> paramHashMap, Method paramMethod, String paramString)`
  
and lines of code are 
```
if (Log.sLogLevel <= 2) {
    Log.v("RESTBroker", "Request: " + paramMethod.toString() + " " + 
    paramString + "\nWith Headers: " + paramHashMap.toString());
}
```


#### 2.2. The problem
If the attacker gets an access to the log he can impersonate the user using the validated session keys which are stored in the logs. In addition Yahoo app also logs: > Chat messages > Password > Phone numbers which can further result in indepth attack vectors.


## List of references
- [https://developer.android.com/guide/topics/permissions/overview#normal-dangerous](https://developer.android.com/guide/topics/permissions/overview#normal-dangerous)
- [https://security.stackexchange.com/questions/86857/can-user-send-fake-request-if-it-has-jwt-token](https://security.stackexchange.com/questions/86857/can-user-send-fake-request-if-it-has-jwt-token)
